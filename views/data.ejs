<!DOCTYPE html>
<html lang="en">

<%- include('header.ejs') %>

<body class="container shadow bg">

<%- include('navbar.ejs') %>

<main class="container text-left" role="main">
  <% if (typeof brand !== "undefined" && brand !== null) { %>
  <div class="row">
  <div class="col-md-2 text-center">
  <% if (typeof type !== "undefined" && type !== null) { %>
    Search by brand: <br> <br>
    <ul class="list-group">
    <% type.forEach( (tp) => { %>
    <li class="list-group-item">
      <a href="/data/<%= tp.name%>">
        <%= tp.name %>
      </a>
    </li>
    <% }) %>
    </ul>
  <% } %>
  </div>

  <div class="col-sm container">
  <h2>
    <em><%= brand.name %></em>:
  </h2>
  <h6><%= brand.details %></h6>

  <hr />

  <% if (typeof carsArr !== "undefined" && carsArr !== null) { %>
  <div class="cars_container card-deck-wrapper card-deck">
  <% carsArr.forEach( (car) => { %>
  <div class="card text-center">
    <img class="card-img-top img-fluid mx-auto d-block"
      src="/<%= car.photo %>"
      alt="<%= car.model %> image">

    <p class="card-text text-center">
      <strong><em><%= car.model %></em></strong>
      <br>
      <a href="/data/<%= car.brand %>">
        <%= car.brand %>
      </a>
      - <%=car.year%>
    </p>
    <a href="/vehicle/<%= car.idCar %>"
      class="btn btn-primary btn-block mt-auto">
        More
    </a>
  </div>
  <% })  %>
  </div>

  <% } else {    %>
  <h4>
    This list is <strong>empty</strong> - head back to
    <a href="/"> main menu.</a>
  </h4>
  <% } %>
  </div>
  </div>

  <% } else {    %>
  <h2>
    Vehicles from <em><%= data %></em>:
  </h2>
  <% if (typeof carsArr !== "undefined" && carsArr !== null) { %>
  <div class="cars_container card-deck-wrapper card-deck">
  <% carsArr.forEach( (car) => { %>
  <div class="card text-center">
    <img class="card-img-top img-fluid mx-auto d-block"
      src="/<%= car.photo %>"
      alt="<%= car.model %> image">

    <p class="card-text text-center">
      <strong><em><%= car.model %></em></strong>
      <br>
      <a href="/data/<%= car.brand %>">
        <%= car.brand %>
      </a>
      - <%=car.year%>
    </p>
    <a href="/vehicle/<%= car.idCar %>"
      class="btn btn-primary btn-block mt-auto">
        More
    </a>
  </div>
  <% })  %>
  </div>

  <% } else {    %>
  <h4>
    This list is <strong>empty</strong> -
    head back to <a href="/catalog"> main menu.</a>
  </h4>
  <% } %>

  <% if (typeof type !== "undefined" && type !== null) { %>
  <em><strong>Trending vehicles:</strong></em>
  <ul class="list-unstyled pagination">
  <% type.forEach( (tp) => { %>
  <li class="page-item">
    <a href="/vehicle/<%= tp.idCar %>">
      <img class="img-fluid img-thumbnail" src="/<%= tp.photo %>">
    </a>
  </li>
  <% }) %>
  </ul>
  <% }
  } %>
</main>
<br />

<%- include('footer.ejs') %>

</body>
</html>
