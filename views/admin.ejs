<!DOCTYPE html>
<html lang="en">

<%- include('header.ejs') %>

<body class="container shadow bg">

<%- include('navbar.ejs') %>

<main class="container" role="main">
  <% switch (res) {
    case "editCar": %>
    <h6 class="classified">
      The vehicle was <strong> edited </strong> successfully.
    </h6>
    <% break;
    case "editRes": %>
    <h6 class="classified">
      The reservation was <strong> edited </strong> successfully.
    </h6>
    <% break;
    case "rem":%>
    <h6 class="classified">
      The reservation was <strong> removed </strong> successfully.
    </h6>
    <% break;
    case "editUse":%>
    <h6 class="classified">
      The user was <strong> edited </strong> successfully.
    </h6>
    <% break;
  }

  if (!car && !resv && !userData) { %>
  <ul class="nav nav-tabs" role="tablist">
    <li id="cars" class="nav-link active">Vehicles</li>
    <li id="resvs" class="nav-link">Reservations</li>
    <li id="users" class="nav-link">Users</li>
  </ul>
  <% } %>

  <div id="cars1" class="hide">
  <%if (carsArr) { %>
  <div class="cars_container card-deck-wrapper card-deck">
    <% carsArr.forEach( (car) => { %>
    <div class="card text-center">
    <img class="card-img-top img-fluid mx-auto d-block"
      src="/<%= car.photo %>"
      alt="<%= car.model %> image">

    <p class="card-text">
      <strong>
        <em><%= car.model %></em>
      </strong>
      <br />
      <a href="/data/<%= car.brand %>">
        <%= car.brand %>
      </a>
      - <%=car.year%>
    </p>
    <a href="/admin/car/<%= car.idCar %>"
      class="btn btn-success btn-block mt-auto">
      More
    </a>
    </div>
    <% }) %>
  </div>
  <% } %>
  </div>

  <div id="resvs1" class="hide">
  <% if (resArr) { %>
  <div class="cars_container card-deck-wrapper card-deck">
  <% resArr.forEach( (res) => { %>
  <div class="card text-center">
    <img class="card-img-top img-fluid mx-auto d-block"
      src="/<%= res.photo %>" alt="<%= res.model %> image">
    <p class="card-text">
      <a href="/vehicle/<%= res.idCar %> %>">
        <%= res.model %>
      </a>
      -
      <strong>
        <i><%= res.fullPrice %> &#36;</i>
      </strong>

      <br />
      <i class="w-0 p-0">
        <%=  new Date(res.dateIn).toDateString() %>
      </i>

      <br />
      <i class="w-0 p-0">
        <%= new Date(res.dateOut).toDateString() %>
      </i>
    </p>

    <a href="/admin/resv/<%= res.idReservation %>"
      class="btn btn-primary btn-block mt-auto">
      More
    </a>
  </div>
  <% })%>
  </div>
  <% } else { %>
    <br />
    <h4> There are no <strong> reservations </strong>.</h4>
  <% } %>
  </div>

  <div id="users1" class="hide">
  <% if (userArr) { %>
  <div class="cars_container card-deck-wrapper card-deck">
  <% userArr.forEach( (use) => { %>
  <div class="card text-center">
    <p class="card-text">
      <strong> <i> <%= use.fullName %> </i> </strong>
      <br />
      <a><%= use.idUser %></a>
      <br />
    </p>

    <a href="/admin/user/<%= use.idUser %>"
      class="btn btn-danger btn-block mt-auto">
      More
    </a>
  </div>
  <% })%>
  </div>
  <% } %>
  </div>

  <% if (car) { %>
  <div class="col-md-5">
    <img class="img-fluid mx-auto d-block"
      src="/<%= car.photo %>">
  </div>

  <div id="car_info" class="col-sm-7 text-left card ">
  <form action="/admin/editCar/<%= car.idCar%>" method="post">
    <div class="form-group">
      <label><%= car.brand %>:
        <input type="text" class="form-control col-md-10" maxlength="20"
          name="model" value="<%= car.model%>" required>
      </label>
    </div>

    <div class="form-group">
    <label>Brand:
      <select class="selectpicker form-control"
        data-style="btn-info" name="brand" required>
        <% slctArr.forEach(function(slct){ %>
          <option value="<%= slct.name %>"><%= slct.name %></option>
        <% }) %>
      </select>
    </label>
    </div>

    <div class="form-group">
    <label>Category:
      <select class="selectpicker form-control"
        data-style="btn-info" name="type" required>
        <% slct1Arr.forEach(function(slct1){ %>
        <option value="<%= slct1.type %>"><%= slct1.type %></option>
        <% }) %>
      </select>
    </label>
    </div>

    <div class="form-group">
      <label> Production:
      <input type="number" class="form-control w-50" name="year"
        value="<%= car.year %>" required>
      </label>
    </div>

    <div class="form-group">
      <label> Price (<i>&#36;</i>):
        <input type="number" class="form-control w-50"
          name="price" value="<%= car.price %>" required>
      </label>
    </div>

    <div class="form-group">
    <label>Active:
      <select class="form-control" name="active">
      <option value="1" selected>Yes</option>
      <option value="0">No</option>
      </select>
    </label>
    </div>

    <hr>

    <div class="py-3 synopsis text-justify">
      <%= car.details %>
    </div>

    <input type="submit"
      class="btn btn-success btn-block btn-sm col-md-12" value="Change">
  </form>
  </div>
  <% } %>

  <%if (resv) { %>
  <div class="col-md-5">
    <img class="img-fluid mx-auto d-block"
      src="/<%= resv.photo %>">
  </div>

  <div id="car_info" class="col-md-5 text-left card">
  <div class="title">
  <strong>
    <i> <%= resv.brand %> <%= resv.model %> </i>
  </strong>
  </div>

  <div class="category"> User:
  <a href="/admin/user/<%= resv.idUser %>">
    <%= resv.fullName %>
  </a>
  </div>

  <div class="category"> Category:
  <a href="/data/<%= resv.type %>">
    <%= resv.type %>
  </a>
  </div>

  <div class="price"> Price:
  <em>
    <%= resv.fullPrice %> &#36;
  </em>
  </div>

  <div class="py-3 price">
    From: <em><%=  new Date(resv.dateIn).toDateString() %></em>
    <br />
    To: <em><%= new Date(resv.dateOut).toDateString() %></em>
  </div>

  <hr />

  <form action="/admin/editRes/<%= resv.idReservation%>" method="post">
  <div class="form-group">
  <label>Date in:
    <input id="dateIn" class="date form-control"
      type="date" name="dateIn" required>
  </label>
  </div>

  <div class="form-group">
  <label>Date out:
    <input id="dateOut" class="date form-control"
      type="date" name="dateOut" readonly required>
  </label>
  </div>

  <div class="form-group">
  <label>Active:
  <select class="form-control" name="active">
    <option value="1" selected>Yes</option>
    <option value="0">No</option>
  </select>
  </label>
  </div>

  <div class="form-group">
    <span id="spMin" class="font-weight-bold text-primary mr-1">1</span>
    <input id="days" class="col-md-5 custom-range"
      type="range" name="days" min="1" max="6" value="1">
    <span id="spMax" class="font-weight-bold text-primary">5</span>
  </div>

  <div class="form-group">
    <label>Full price:
      <input id="price" type="hidden" value="<%= resv.price %>">
      <input id="numbers" size="3" name="numbers"
        value="<%= resv.price %>" readonly> <i>&#36;</i>
    </label>
  </div>

  <input type="submit" class="col-md-6 btn btn-primary btn-sm" value="Edit">
  </form>

  <form class="py-2" action="/admin/rem/<%= resv.idReservation%>" method="post">
  <input type="submit" class="col-md-6 btn btn-danger btn-sm" value="Remove">
  </form>
  </div>
  <% } %>

  <%if (userData) { %>
  <div class="text-center">
    <i class="fa fa-user fa-4x"></i>
  </div>

  <div id="car_info" class="col-md-9 text-left mx-auto card">
  <form action="/admin/editUse/<%= userData.idUser%>" method="post">
  <div class="form-group">
  <label>Full Name:</label>
  <input type="text" size="14" maxlength="20" class="form-control"
    value="<%= userData.fullName %>" name="name" required>
  </div>

  <div class="form-group">
  <label>E-mail:</label>
  <input type="email" class="form-control"
    value="<%= userData.email %>" name="email" required>
  </div>

  <div class="form-group">
  <label>Active:
  <select class="form-control" name="active">
    <option value="1" selected>Yes</option>
    <option value="0">No</option>
  </select>
  </label>

  <label>Admin:
  <select class="form-control" name="admin">
    <option value="0" selected>No</option>
    <option value="1">Yes</option>
  </select>
  </label>
  </div>

  <input type="submit"
    class="btn btn-danger btn-block btn-sm col-sm-12" value="Edit">
  </form>
  </div>
  <% } %>
</main>

<%- include('footer.ejs') %>

</body>

<script src="/js/script.js"></script>

</html>
